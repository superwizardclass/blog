---
import Layout from "../layouts/Layout.astro";
import Introduction from "../components/Introduction.astro";
import PostPreview from "../components/PostPreview.astro";
const posts = await Astro.glob("../pages/posts/*.md");
const publishedPosts = await posts.filter((post) => post.frontmatter.publish);
const profilePic = "/blog/blog-profile-pic.jpg";
---

<Layout title="home">
  <h1
    class="bg-gradient-to-r from-indigo-600 to-pink-500 py-3 text-center text-2xl font-bold text-white"
  >
    hi all.
  </h1>
  <Introduction>
    <img
      class="w-20 rounded-full"
      src={profilePic}
      alt="github profile picture"
    />
    <p class="self-center text-xs leading-tight">
      <>
        Dan here, just wanted a small space on the internet to share cool stuff!
      </>
    </p>
    <h1 class="px-2">recent posts</h1>
    <section class="flex flex-col-reverse gap-3">
      {
        publishedPosts.map((post) => (
          <PostPreview
            title={post.frontmatter.title}
            url={post.url}
            description={post.frontmatter.description}
            pubDate={post.frontmatter.pubDate}
          />
        ))
      }
    </section>
    <section class="mx-auto mt-auto">
      <p class="text-xs">
        <sup class="text-sm">*</sup>not big enough to be a super blog... yet.
      </p>
    </section>
  </Introduction>

  <style></style>
</Layout>
